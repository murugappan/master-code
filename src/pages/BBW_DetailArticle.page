<apex:page standardController="Solution" extensions="BBW_DetailArticle" action="{!originalArticle}">
    <head>
        <style type="text/css">
            a:link {color:#0000FF; text-decoration:none;}      /* unvisited link */
            a:visited {color:#0000CC; text-decoration:none;}  /* visited link */
            a:hover {color:#0000FF; text-decoration:underline;}  /* mouse over link */
            a:active {color:#0000FF; text-decoration:underline;}  /* selected link */
            pre {
                      font-family: courier, fixed-width;
                      white-space: pre-wrap;       /* css-3 */
                      white-space: -moz-pre-wrap;  /* Mozilla, since 1999 */
                      white-space: -pre-wrap;      /* Opera 4-6 */
                      white-space: -o-pre-wrap;    /* Opera 7 */
                      word-wrap: break-word;       /* Internet Explorer 5.5+ */
                    }
        </style> 
    </head>
    <TITLE>{!solution.SolutionNumber}</TITLE> 
    <apex:includeScript value="/support/console/20.0/integration.js"/>
    
    
    <script type="text/javascript">
    
        function SetTabTitle() {
            //Set the current tab's title
            sforce.console.setTabTitle('Article : {!solution.SolutionNumber}');
        }
        
        window.onload = new function() { SetTabTitle(); };
             
        function View1(strId){     
            if (typeof(srcUp) == 'function') {//For Console View
                srcSelf('{!solution.Link__c}'+strId+'?isdtp=vw'); 
            }else {   //For Salesforce
                window.open('../'  + strId, '_parent');
            }
         } 
        function clientView() {             
            window.open('/apex/btbb_articleview?id='  + '{!solution.id}', '_blank');
         }
        /*function getConfirmation() {
            
            if(confirm("Are you sure to create clone of Article"))
                
        }*/
        /*function checkStatusOfArticle() {
            alert('{!solution.Status}');
            if('{!solution.ParentId__c}' != null && '{!solution.Status}' == "Published") {
                
                alert('{!solution.ParentId__c}');
                if(confirm('test')) {
                
                    sayHello();
                }
            }
            
            
        }
        function sayHello() {
        
            alert('In Say Hello');
        }
        window.onload = checkStatusOfArticle();*/
    </script>
    <apex:form >    
    <apex:sectionHeader title="Article - {!recordType}" subtitle="{!Solution.SolutionName}"/>
               <chatter:feedwithfollowers entityid="{!aid}"/>

   <!-- <div id="Original Article" style="display:{!IF(NOT(ISNULL(solution.ParentId__c) && solution.isContentReviewCopy__c == true),'block','none')}"> 
        <font size ="0" color="red">Note: Artcle is content review article.In case of rejection original article will be archived</font>
    </div>-->
    <a id="articleList" href="#" onClick="View1('501/o');"><font size ="0" color="blue">Back to List : Articles</font></a>
       <apex:pageBlock title="Article Detail" mode="detail" tabStyle="Solution">
            <apex:pageBlockButtons location="top" >
              
                <apex:image value="/img/lock_small.gif" alt="Lock" width="16" height="16" title="Lock" rendered="{!solution.isApprovalSent__c}"/>                 
                <apex:commandButton value="Customer View" action="{!CustomerView}" onclick="clientView()" rendered="{!IF($Profile.Name == 'SRV - System Administrator' || $Profile.Name == 'System Administrator' || $Profile.Name == 'SRV - KM Administrators' || $Profile.Name == 'SRV - APAC User - KM' || $Profile.Name == 'SRV - KM USR - Publisher'|| $Profile.Name == 'SRV - Maintenance Experience Team' || $Profile.Name == 'SRV - Process Author' || $Profile.Name == 'SRV - Product Documentation Team' || $Profile.Name == 'SRV - SBSA Authors' || $Profile.Name == 'SRV - Support Tech' ,true, false)}" rerender="errorBlock" />                
                <apex:commandButton value="Edit" action="{!editArticle}" rendered="{!IF((solution.status != 'Published' && solution.status != 'In review' && $User.Id == solution.CreatedById) || $Profile.Name == 'System Administrator' || $Profile.Name == 'SRV - System Administrator' ||  $Profile.Name == 'SRV - KM Administrators' || $Profile.Name == 'SRV - APAC User - KM' || $Profile.Name == 'SRV - KM USR - Publisher', 'true', 'false')}"/>
                <apex:commandButton value="Delete" action="{!deleteArticle}" rendered="{!IF((solution.status != 'Published' && solution.status != 'In review' && $User.Id == solution.CreatedById)  || ($Profile.Name == 'System Administrator' || $Profile.Name == 'SRV - System Administrator' || $Profile.Name == 'SRV - KM Administrators' || $Profile.Name == 'SRV - APAC User - KM' || $Profile.Name == 'SRV - KM USR - Publisher'), 'true', 'false')}"/> 
                <apex:commandButton value="Edit Published Article" onclick="return confirm('To edit this published article, you are creating a clone of this article.Please make sure to make all edits to this “Draft” edition.  Your edits will not be published to the original article until the draft is sent to the publishers and approved.')" action="{!cloneArticle}" rendered="{!IF(solution.status == 'Published' && solution.iscopy__c == false && solution.ParentId__c == null && ($Profile.Name == 'System Administrator' || $Profile.Name == 'SRV - System Administrator' || $Profile.Name == 'SRV - KM Administrators' || $Profile.Name == 'SRV - APAC User - KM' || ($Profile.Name == 'SRV - Process Author' && recordType == 'Process/Procedure') || $Profile.Name == 'SRV - KM USR - Publisher' || ($Profile.Name == 'SRV - Product Documentation Team' && recordType == 'Product Documentation')|| ($Profile.Name == 'SRV - SBSA Authors' && recordType == 'Support Bulletin/Security Advisory') || ($Profile.Name == 'SRV - Maintenance Experience Team' && (recordType == 'Supported Technologies Information' || recordType == 'Product Release Information' || recordType == 'Version Information')) || ($Profile.Name == 'SRV - Support Tech' && (recordType == 'Standard' || recordType == 'Question/Answer' || recordType == 'Troubleshooting/Informational'))), true, false)}"/>
                <apex:pageMessages />
                <div id="errorBlock">
                    <apex:outputPanel id="errorPanel">
                        <apex:pageMessage strength="2" title="{!errorTitle}" summary="{!errorMessage}" severity="{!errorSeverity}" rendered="{!errorShow}" />
                    </apex:outputPanel>
                </div>                 
            </apex:pageBlockButtons>
            <div id="Original Article" style="display:{!IF(NOT(ISNULL(solution.ParentId__c)),'block','none')}"> 
                <apex:pageBlockSection columns="1">
                    <apex:pageBlockSectionItem >
                       <apex:OutputLabel value="Published Article :"/>
                       <a id="publishArticle" href="/{!solution.ParentId__c}">Published Article Link</a>
                    </apex:pageBlockSectionItem>
                </apex:pageBlockSection>
            </div>
            <apex:pageBlockSection columns="1">
              <apex:outputField value="{!Solution.SolutionNumber}"/>
            </apex:pageBlockSection>  
            <apex:inputHidden value="{!Solution.Isrejected__c}"/>    
           <!-- <apex:inputHidden value="{!Solution.RecordType.Name}"/>  -->     
            <div id="Type" style="display:{!IF(recordType == 'Support Bulletin/Security Advisory','block','none')}">
              <apex:pageBlockSection columns="1">
                  <apex:outputField value="{!Solution.Type__c}" />
              </apex:pageBlockSection>
            </div> 
            <apex:pageBlockSection columns="1">
              <apex:outputField value="{!Solution.SolutionName}"/>
            </apex:pageBlockSection>    
            <div id="Product" style="display:{!IF(recordType == 'Troubleshooting/Informational' || recordType == 'Standard' || recordType == 'Question/Answer' || recordType == 'Known Issue' || recordType == 'Product Documentation' || recordType == 'Product Release Information' || recordType == 'Support Bulletin/Security Advisory' || recordType == 'Supported Technologies Information' || recordType == 'Version Information'|| recordType == 'Announcement','block','none')}">
              <apex:pageBlockSection columns="1">
                  <apex:outputField value="{!Solution.Product__c}"/>
              </apex:pageBlockSection>
            </div>  
            <div id="major" style="display:{!IF(recordType == 'Troubleshooting/Informational' || recordType == 'Standard' || recordType == 'Question/Answer' || recordType == 'Known Issue' || recordType == 'Product Documentation' || recordType == 'Product Release Information' || recordType == 'Supported Technologies Information' || recordType == 'Version Information','block','none')}">
              <apex:pageBlockSection columns="1">                 
                  <apex:outputField value="{!Solution.Major_Release__c}"/>                    
              </apex:pageBlockSection>
            </div>  
            <div id="version" style="display:{!IF(recordType == 'Troubleshooting/Informational' || recordType == 'Standard' || recordType == 'Question/Answer' || recordType == 'Known Issue' || recordType == 'Product Documentation' || recordType == 'Supported Technologies Information' || recordType == 'Version Information','block','none')}">
              <apex:pageBlockSection columns="1">
                  <apex:outputField value="{!Solution.Version_s__c}"/>
              </apex:pageBlockSection>
            </div>
            
            <apex:pageBlockSection columns="1">
            <apex:PageBlockSectionItem >
                <apex:outputLabel value="Status" style="color:green"/>
                <apex:outputText value="{!Solution.status}"/>
            </apex:PageBlockSectionItem>
            </apex:pageBlockSection>             
             <apex:inputHidden value="{!Solution.summary__c}"/>                          
            <div id="Issue" style="display:{!IF(recordType == 'Known Issue' || recordType == 'Standard','block','none')}">
              <apex:pageBlockSection columns="1">
                  <apex:outputField value="{!Solution.Issue_Description__c}"/>                  
              </apex:pageBlockSection>
            </div>
            
            <div id="DocumentType" style="display:{!IF(recordType == 'Product Documentation' || $Profile.Name == 'SRV - Product Documentation Team','block','none')}">
                <apex:pageBlockSection columns="1">
                    <apex:outputField value="{!Solution.Document_Type__c}"/>
                </apex:pageBlockSection>
              </div>     
              <div id="ResourceType" style="display:{!IF(recordType == 'Other Resource','block','none')}">
                <apex:pageBlockSection columns="1">
                    <apex:outputField value="{!Solution.ResourceType__c}"/>
                </apex:pageBlockSection>
              </div>     
            <div id="StepstoReproduce" style="display:{!IF(recordType == 'Known Issue' ,'block','none')}">
              <apex:pageBlockSection columns="1">
                  <apex:outputField value="{!Solution.Steps_to_Reproduce__c}" style="border-color:red"/>
              </apex:pageBlockSection>
            </div>                
            
            <!--<div id="Known" style="display:{!IF(recordType == 'Standard' || recordType == 'Known Issue' || recordType == 'Support Bulletin/Security Advisory','block','none')}">
              <apex:pageBlockSection columns="1">                  
                  <apex:outputField value="{!Solution.Support_Incident__c}"/>
              </apex:pageBlockSection>
            </div>-->
            
            <div id="Process" style="display:{!IF(recordType == 'Process/Procedure' || $Profile.Name == 'SRV - Process Author' && recordType != 'Question/Answer' ,'block','none')}">
              <apex:pageBlockSection columns="1">
                  <apex:outputField value="{!Solution.Team_s__c}"/>             
              </apex:pageBlockSection>
            </div>
            <div id="Announcement" style="display:{!IF(recordType == 'Announcement','block','none')}">
              <apex:pageBlockSection columns="1">
              <apex:pageBlockSectionItem >
                  <apex:OutputLabel value="Announcement Details"/>
                  <apex:outputField value="{!Solution.Announcement_Detail__c}"/>
                 </apex:pageBlockSectionItem>
                 <apex:pageBlockSectionItem >
                  <apex:OutputLabel value="Related Link(s)"/>             
                  <apex:outputField value="{!Solution.Related_Link_s__c}"/>
              </apex:pageBlockSectionItem>
              </apex:pageBlockSection>
            </div>
            <div id="ProDoc" style="display:{!IF(recordType == 'Product Documentation','block','none')}">
              <apex:pageBlockSection columns="1">
                  <apex:outputField value="{!Solution.Document_Link__c}"/>
              </apex:pageBlockSection>
            </div> 
            
           <apex:pageBlockSection columns="1">
              <apex:pageBlockSectionItem rendered="{!IF(recordType != 'Process/Procedure','true','false')}">
                <apex:OutputLabel value="Visible in Customer Portal" style="color:green"/>             
                <apex:outputField value="{!Solution.Visible_in_Customer_Portal__c}" id="visCustPortal"/>
              </apex:pageBlockSectionItem>  
                <apex:pageBlockSectionItem rendered="{!IF(recordType != 'Process/Procedure','true','false')}">
                <apex:OutputLabel value="Visible in Partner Portal" style="color:green"/>         
                <apex:outputField value="{!Solution.Visible_in_Partner_Portal__c}" id="visPartPortal"/>
                </apex:pageBlockSectionItem> 
                <apex:pageBlockSectionItem rendered="{!IF(recordType != 'Process/Procedure','true','false')}">
                <apex:OutputLabel value="Visible in Public KnowledgeBase" style="color:green"/>         
                <apex:outputField value="{!Solution.IsPublishedInPublicKb}" id="visPubKnwBase"/>
                </apex:pageBlockSectionItem>
              </apex:pageBlockSection>         
                  
          <div id="Otheresources" style="display:{!IF(recordType == 'Other Resource','block','none')}" align="middle">
              <apex:pageBlockSection columns="1">           
                              
                   <apex:pageBlockSectionItem >
                       <apex:OutputLabel value="Resource Description"/>
                       <apex:OutputText value="{!Solution.Resource_Description__c}" escape="false"/>                    
                   </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem >
                       <apex:OutputLabel value="Important Information"/>
                       <apex:OutputText value="{!Solution.Important_Information__c}" escape="false"/>                         
                   </apex:pageBlockSectionItem>
                   <apex:pageBlockSectionItem >
                       <apex:OutputLabel value="Resource Link"/>
                       <apex:OutputText value="{!Solution.Resource_Link__c}" escape="false"/>
                   </apex:pageBlockSectionItem> 
                   <apex:pageBlockSectionItem >
                      <apex:OutputLabel value="Download"/>
                      <apex:OutputText value="{!Solution.Download__c}" escape="false"/>
                   </apex:pageBlockSectionItem>  
              </apex:pageBlockSection>              
          </div>  
          <div id="Question/Answer" style="display:{!IF(recordType == 'Question/Answer','block','none')}">
              <apex:pageBlockSection columns="1"> 
                   <apex:outputField value="{!Solution.Question__c}"/>                 
                   <apex:pageBlockSectionItem >
                       <apex:OutputLabel value="Answer"/>
                       <apex:OutputText value="{!Solution.Answer__c}" escape="false"/>                         
                   </apex:pageBlockSectionItem>
              </apex:pageBlockSection>
          </div>
          <div id="StandardAndKnownIssue" style="display:{!IF(recordType == 'Standard' || recordType == 'Known Issue','block','none')}">
              <apex:pageBlockSection columns="1">                  
                   <apex:pageBlockSectionItem >
                       <apex:OutputLabel value="Symptoms"/>
                       <apex:OutputText value="{!Solution.Symptoms__c}" escape="false"/>                         
                   </apex:pageBlockSectionItem>
                   <apex:pageBlockSectionItem >
                       <apex:OutputLabel value="Cause"/>
                       <apex:OutputText value="{!Solution.Cause__c}" escape="false"/>
                   </apex:pageBlockSectionItem>
                   <apex:pageBlockSectionItem >
                       <apex:OutputLabel value="Resolution/Workaround"/>
                       <apex:OutputText value="{!Solution.Resolution_Workaround__c}" escape="false"/>
                   </apex:pageBlockSectionItem>                                      
              </apex:pageBlockSection>
         </div>  
          <div id="target" style="display:{!IF(recordType == 'Standard' || recordType == 'Known Issue','block','none')}">
              <apex:pageBlockSection columns="1">                  
                  <apex:outputField value="{!Solution.Target_Release_New__c}"/>
                  <!--<apex:outputField value="{!Solution.Target_Release_New__c}"/>-->
                  <apex:pageBlockSectionItem >
                       <apex:OutputLabel value="Best Practice Info"/>
                       <apex:OutputText value="{!Solution.Best_Practice_Information__c}" escape="false"/>
                   </apex:pageBlockSectionItem> 
                   </apex:pageBlockSection>
            </div>  
         <div id="TSG" style="display:{!IF(recordType == 'Troubleshooting/Informational','block','none')}">
            <apex:pageBlockSection columns="1">                  
                  <apex:pageBlockSectionItem >
                          <apex:OutputLabel value="Introduction"/>
                          <apex:OutputText value="{!Solution.How_is_the_component_designed_to_work__c}" escape="false"/>
                  </apex:pageBlockSectionItem>
                           
                  <apex:pageBlockSectionItem >
                        <apex:OutputLabel value="Functionality"/>
                        <apex:OutputText value="{!Solution.Files_collection_to_troubleshoot_cpnent__c}" escape="false"/>
                   </apex:pageBlockSectionItem> 
                   
                   <apex:pageBlockSectionItem >
                        <apex:OutputLabel value="Related System Information"/>
                        <apex:OutputText value="{!Solution.Evaluation_of_logs_information__c}" escape="false"/>                        
                   </apex:pageBlockSectionItem>   
            
                  <apex:pageBlockSectionItem >
                        <apex:OutputLabel value="Evaluating Related System Information"/>
                        <apex:OutputText value="{!Solution.Causes_of_the_common_issues_with_this_cp__c}" escape="false"/>
                  </apex:pageBlockSectionItem>               
                  
                  <apex:pageBlockSectionItem >
                        <apex:OutputLabel value="Common Issues"/>
                        <apex:OutputText value="{!Solution.Resources_use_to_troubleshoot_this_cp__c}" escape="false"/>
                  </apex:pageBlockSectionItem>
            </apex:pageBlockSection>  
        </div>           
            
          <div id="ProcessProcedure" style="display:{!IF(recordType == 'Process/Procedure','block','none')}">
              <apex:pageBlockSection columns="1">
                  <!--<apex:repeat value="{!$ObjectType.Solution.FieldSets.Process_Procedure_Article_Fields}" var="TC">
                    <apex:inputField value="{!Solution[TC]}"/>
                    
                 </apex:repeat>-->                   
                <apex:pageBlockSectionItem >
                    <apex:OutputLabel value="Process Flow"/>
                    <apex:OutputText value="{!Solution.Process_Flow__c}" escape="false"/>                   
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:OutputLabel value="Process Detail"/>
                    <apex:OutputText value="{!Solution.Process_Details__c}" escape="false"/>
                </apex:pageBlockSectionItem>                     
            </apex:pageBlockSection>  
        </div>
          <div id="ProductDoc" style="display:{!IF(recordType == 'Product Documentation','block','none')}">
           <apex:pageBlockSection columns="1">
                <!--<apex:repeat value="{!$ObjectType.Solution.FieldSets.Product_Documentation_Article_Fields}" var="TC">
                  <apex:outputField value="{!Solution[TC]}"/>
                  
                </apex:repeat>-->
                <apex:pageBlockSectionItem >
                    <apex:OutputLabel value="Document Summary"/>
                    <apex:OutputText value="{!Solution.Document_Summary__c}" escape="false"/>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:OutputLabel value="Document Details"/>
                    <apex:OutputText value="{!Solution.Document_Details__c}" escape="false"/>
                </apex:pageBlockSectionItem>
           </apex:pageBlockSection>
          </div>     
          <div id="TSGInternalField" style="display:{!IF(recordType == 'Troubleshooting/Informational','block','none')}">
                <apex:pageBlockSection columns="1">                                                  
                    <apex:pageBlockSectionItem >
                         <apex:OutputLabel value="Internal Only Notes" style="color:green"/>
                         <apex:OutputText value="{!Solution.Internal_Only_Notes__c}" escape="false"/>
                     </apex:pageBlockSectionItem>  
                </apex:pageBlockSection> 
           </div>          
          <div id="ProductRelease" style="display:{!IF(recordType == 'Product Release Information','block','none')}">
           <apex:pageBlockSection columns="1">
                <!--<apex:repeat value="{!$ObjectType.Solution.FieldSets.Product_Release_Article_Fields}" var="TC">
                  <apex:outputField value="{!Solution[TC]}"/>
                  
               </apex:repeat>-->
                <apex:pageBlockSectionItem >
                     <apex:OutputLabel value="Available Versions"/>
                     <apex:OutputText value="{!Solution.Available_Versions__c}" escape="false"/>
                 </apex:pageBlockSectionItem>
                 <apex:pageBlockSectionItem >
                     <apex:OutputLabel value="Upgrade Information"/>
                     <apex:OutputText value="{!Solution.Upgrade_Information__c}" escape="false"/>
                 </apex:pageBlockSectionItem>
                 <!--<apex:pageBlockSectionItem>
                     <apex:OutputLabel value="Product Documentation"/>
                     <apex:OutputText value="{!Solution.Product_Documentation__c}" escape="false"/>
                 </apex:pageBlockSectionItem> Commented for Issue 1567-->                 
                 <apex:pageBlockSectionItem >
                     <apex:OutputLabel value="Product Documentation"/>
                     <apex:OutputText value="{!Solution.Product_Documentation_New__c}" escape="false"/>
                 </apex:pageBlockSectionItem>
                 <apex:pageBlockSectionItem >
                     <apex:OutputLabel value="Support Policy"/>
                     <apex:OutputText value="{!Solution.Support_Policy__c}" escape="false"/>                     
                 </apex:pageBlockSectionItem>
                 <!--<apex:pageBlockSectionItem>
                     <apex:OutputLabel value="Other Information"/>
                     <apex:OutputText value="{!Solution.Other_Information__c}" escape="false"/>
                 </apex:pageBlockSectionItem>-->
                 <apex:pageBlockSectionItem >
                        <apex:OutputLabel value="Download"/>
                        <apex:OutputText value="{!Solution.Download__c}" escape="false"/>
                 </apex:pageBlockSectionItem>
                 <!-- Commented by shirish on 27-July-11 for closing issue#1508 -->
                 <!--<apex:outputField value="{!Solution.Support_Policy__c}"/>
                 
                 <apex:outputField value="{!Solution.Other_Information__c}"/>-->
           </apex:pageBlockSection>   
           <apex:pageBlockSection columns="1">
                 <apex:pageBlockSectionItem >
                      <apex:OutputLabel value="Public Url"/>
                      <apex:Outputfield value="{!Solution.Public_URL__c}" />
                   </apex:pageBlockSectionItem>
              </apex:pageBlockSection>
           <!--product release dynamic table-->        
       <apex:pageBlock title="Known Issue" mode="detail">         
         <apex:pageBlockSection columns="1"> 
            <apex:pageBlockTable value="{!KIArticleList}" var="KIArticle" id="KnownIssue_table">
                
                <apex:column width="30px">
                     <apex:facet name="header"><strong>Article Number</strong></apex:facet> 
                    <a href="/apex/BBW_DetailArticle?Id={!KIArticle.articleId}">{!KIArticle.SolutionNumber}</a>                     
                </apex:column>                 
                <apex:column >   
                    <apex:facet name="header"><strong>Component</strong></apex:facet>
                    {!KIArticle.categoriesName}
                </apex:column>
                <apex:column > 
                    <apex:facet name="header"><strong>Version</strong></apex:facet>  
                    {!KIArticle.Versions}
                </apex:column>
                <apex:column > 
                    <apex:facet name="header"><strong>Issue Description</strong></apex:facet> 
                    {!KIArticle.IssueDescription}
                </apex:column>                    
                <apex:column >
                    <apex:facet name="header"><strong>Target Fix Release</strong></apex:facet>
                    {!KIArticle.TargetFixRelease}
                </apex:column>
                <apex:column >
                    <apex:facet name="header"><strong>Patch Available</strong></apex:facet>
                    {!KIArticle.PatchAvailable}
                </apex:column>
            </apex:pageBlockTable>            
        </apex:pageBlockSection>
    </apex:pageBlock>
          </div>                  
                     
             <div id="SupportBulletin" style="display:{!IF(recordType == 'Support Bulletin/Security Advisory','block','none')}">
              <apex:pageBlockSection columns="1">
                   <!--<apex:repeat value="{!$ObjectType.Solution.FieldSets.Support_Bulletin_Article_Fields}" var="TC">
                     <apex:outputField value="{!Solution[TC]}"/>
                     
                  </apex:repeat>-->
                   <!--<apex:pageBlockSectionItem >
                       <apex:OutputLabel value="Important Information about the Issue"/>
                       <apex:OutputText value="{!Solution.Important_Information_about_the_Issue__c}" escape="false"/>
                   </apex:pageBlockSectionItem>
                   <apex:pageBlockSectionItem >
                       <apex:OutputLabel value="Symptoms"/>
                       <apex:OutputText value="{!Solution.Symptoms__c}" escape="false"/>
                   </apex:pageBlockSectionItem>
                   <apex:pageBlockSectionItem >
                       <apex:OutputLabel value="Cause"/>
                       <apex:OutputText value="{!Solution.Cause__c}" escape="false"/>
                   </apex:pageBlockSectionItem>
                   <apex:pageBlockSectionItem > 
                       <apex:OutputLabel value="Resolution/Workaround"/>
                       <apex:OutputText value="{!Solution.Resolution_Workaround__c}" escape="false"/>
                   </apex:pageBlockSectionItem>-->
                   <apex:pageBlockSectionItem >
                       <apex:OutputLabel value="Bulletin/Advisory Information"/>
                       <apex:OutputText value="{!Solution.Bulletin_Advisory_Information__c}" escape="false"/>
                   </apex:pageBlockSectionItem>                        
                     <apex:pageBlockSectionItem >
                       <apex:OutputLabel value="Internal Only Notes" style="color:green"/>
                       <apex:OutputText value="{!Solution.Internal_Only_Notes__c}" escape="false"/>
                   </apex:pageBlockSectionItem>    
               </apex:pageBlockSection>
             </div>  
             <div id="targetnew" style="display:{!IF(recordType == 'Known Issue' || recordType == 'Standard' || recordType == 'Question/Answer','block','none')}">
              <apex:pageBlockSection columns="1">                  
                       <apex:pageBlockSectionItem >
                       <apex:OutputLabel value="Internal Only Notes" style="color:green"/>
                       <apex:OutputText value="{!Solution.Internal_Only_Notes__c}" escape="false"/>
                   </apex:pageBlockSectionItem>
                   <apex:pageBlockSectionItem >
                   <apex:OutputLabel value="Support Incident" style="color:green"/>
                  <apex:outputField value="{!Solution.Support_Incident__c}"/>
                  </apex:pageBlockSectionItem>
                  </apex:pageBlockSection>
            </div>   
             <div id="target1" style="display:{!IF(recordType == 'Known Issue','block','none')}">
              <apex:pageBlockSection columns="1">                  
                  <apex:pageBlockSectionItem >
                  <apex:OutputLabel value="Number of Clients Reporting" style="color:green"/>
                  <apex:outputText value="{!Solution.Number_of_Clients_Reporting__c}"/>                 
                  </apex:pageBlockSectionItem>
                  <apex:outputField value="{!Solution.Patch_Available__c}"/>
              </apex:pageBlockSection>
            </div>
             <div id="target2" style="display:{!IF(recordType == 'Standard','block','none')}">
              <apex:pageBlockSection columns="1">                  
                  <!--<apex:outputField value="{!Solution.Target_Release_New__c}"/>
                       <apex:pageBlockSectionItem >
                       <apex:OutputLabel value="Best Practice Info"/>
                       <apex:OutputText value="{!Solution.Best_Practice_Information__c}" escape="false"/>
                   </apex:pageBlockSectionItem>--> 
                   <apex:pageBlockSectionItem >
                  <apex:OutputLabel value="Number of Clients Reporting" style="color:green"/>
                  <apex:outputText value="{!Solution.Number_of_Clients_Reporting__c}"/>                 
                  </apex:pageBlockSectionItem>
                  <apex:outputField value="{!Solution.Patch_Available__c}"/>
              </apex:pageBlockSection>
            </div>
            
            <div id="target3" style="display:{!IF(recordType == 'Known Issue' || recordType == 'Standard' ,'block','none')}">
              <apex:pageBlockSection columns="1">
               <apex:pageBlockSectionItem >
                <apex:OutputLabel value="Patch Comments"/>
                <apex:OutputText value="{!Solution.Patch_Comments__c}" id="PatchComments" escape="false"/>
               </apex:pageBlockSectionItem>
              </apex:pageBlockSection>
              </div>           
             
             <div id="Support Technology" style="display:{!IF(recordType == 'Supported Technologies Information','block','none')}">
              <apex:pageBlockSection columns="1">
              
                  <apex:pageBlockSectionItem >
                      <apex:OutputLabel value="Plateform Technology"/>
                      <apex:OutputText value="{!Solution.Platform_Technologies__c}" escape="false"/>
                  </apex:pageBlockSectionItem>
                  <apex:pageBlockSectionItem >
                      <apex:OutputLabel value="Client Technology"/>
                      <apex:OutputText value="{!Solution.Client_Technologies__c}" escape="false"/>
                  </apex:pageBlockSectionItem>
                  <apex:pageBlockSectionItem > 
                      <apex:OutputLabel value="Upgrade Paths"/>
                      <apex:OutputText value="{!Solution.Upgrade_Paths__c}" escape="false"/>
                  </apex:pageBlockSectionItem>                             
              </apex:pageBlockSection>
            </div>               
                          
             <div id="VersionInfo" style="display:{!IF(recordType == 'Version Information','block','none')}">
                  <apex:pageBlockSection columns="1">
                   <!--<apex:repeat value="{!$ObjectType.Solution.FieldSets.Version_Information_Article_Fields}" var="TC">
                     <apex:outputField value="{!Solution[TC]}"/>                     
                  </apex:repeat>-->                  
                <apex:pageBlockSectionItem >
                       <apex:OutputLabel value="Download"/>
                       <apex:OutputText value="{!Solution.Download__c}" escape="false"/>
                   </apex:pageBlockSectionItem>
                   <apex:pageBlockSectionItem >
                       <apex:OutputLabel value="Supported Technology"/>
                       <apex:OutputText value="{!Solution.Supported_Technologies__c}" escape="false"/>
                   </apex:pageBlockSectionItem>
                   <apex:pageBlockSectionItem > 
                       <apex:OutputLabel value="Release Notes"/>
                       <apex:OutputText value="{!Solution.Release_Notes__c}" escape="false"/>
                   </apex:pageBlockSectionItem> 
                   <!--<apex:pageBlockSectionItem > 
                       <apex:OutputLabel value="Known Issues"/>
                       <apex:OutputText value="{!Solution.Known_Issues__c}" escape="false"/>
                   </apex:pageBlockSectionItem> 
                   <apex:pageBlockSectionItem > 
                       <apex:OutputLabel value="Resolved Issues"/>
                       <apex:OutputText value="{!Solution.Resolved_Issues__c}" escape="false"/>
                   </apex:pageBlockSectionItem> -->                                                      
              </apex:pageBlockSection>              
              
              <!--version info  table-->        
                <apex:pageBlock title="Known Issues" mode="detail">         
         <apex:pageBlockSection columns="1"> 
            <apex:pageBlockTable value="{!KIArticleList}" var="KIArticle" id="KnownIssue_table">
                
                <apex:column width="30px">
                     <apex:facet name="header"><strong>Article Number</strong></apex:facet> 
                    <a href="/apex/BBW_DetailArticle?Id={!KIArticle.articleId}">{!KIArticle.SolutionNumber}</a>                     
                </apex:column>                 
                <apex:column >   
                    <apex:facet name="header"><strong>Component</strong></apex:facet>
                    {!KIArticle.categoriesName}
                </apex:column>
                <apex:column > 
                    <apex:facet name="header"><strong>Version</strong></apex:facet>  
                    {!KIArticle.Versions}
                </apex:column>
                <apex:column > 
                    <apex:facet name="header"><strong>Issue Description</strong></apex:facet> 
                    {!KIArticle.IssueDescription}
                </apex:column>                    
                <apex:column >
                    <apex:facet name="header"><strong>Target Fix Release</strong></apex:facet>
                    {!KIArticle.TargetFixRelease}
                </apex:column>
                <apex:column >
                    <apex:facet name="header"><strong>Patch Available</strong></apex:facet>
                    {!KIArticle.PatchAvailable}
                </apex:column>
            </apex:pageBlockTable>            
        </apex:pageBlockSection>
    </apex:pageBlock>
    
                      
                <apex:pageBlock title="Resolved Issues" mode="detail">         
         <apex:pageBlockSection columns="1"> 
            <apex:pageBlockTable value="{!KIResolvedArticleList}" var="KIArticle" id="KnownIssue_table">
                
                <apex:column width="30px">
                     <apex:facet name="header"><strong>Article Number</strong></apex:facet> 
                    <a href="/apex/BBW_DetailArticle?Id={!KIArticle.articleId}">{!KIArticle.SolutionNumber}</a>                     
                </apex:column>                 
                <apex:column >   
                    <apex:facet name="header"><strong>Component</strong></apex:facet>
                    {!KIArticle.categoriesName}
                </apex:column>
                <apex:column > 
                    <apex:facet name="header"><strong>Version</strong></apex:facet>  
                    {!KIArticle.Versions}
                </apex:column>
                <apex:column > 
                    <apex:facet name="header"><strong>Issue Description</strong></apex:facet> 
                    {!KIArticle.IssueDescription}
                </apex:column>                    
                <apex:column >
                    <apex:facet name="header"><strong>Target Fix Release</strong></apex:facet>
                    {!KIArticle.TargetFixRelease}
                </apex:column>                
            </apex:pageBlockTable>            
        </apex:pageBlockSection>
    </apex:pageBlock>
          </div>       
          <!--  <div id="Desclaimer" style="display:{!IF(recordType == 'Troubleshooting/Informational' || recordType == 'Standard' || recordType == 'Known Issue','block','none')}"> 
              <apex:pageBlockSection columns="1">
                  <apex:outputField value="{!Solution.Disclaimer__c}"/>
              </apex:pageBlockSection>  
          </div>    -->          
          
                        
      </apex:pageBlock>
  </apex:form>
  

  <apex:relatedList list="ProcessSteps" rendered="{!IF($Profile.Name == 'Bb - Custom Gold Channel Partner User' || $Profile.Name == 'SRV - Resellers' || $Profile.Name == 'Gold Partner User', false, true)}"/>
  <!-- Added by Shirish on 26 July -->
  <apex:form id="AttchedArticles">
    <apex:pageBlock title="Article Attachments" mode="detail">
         <apex:pageBlockButtons location="top" >
            <apex:commandButton value="Add New Attachment" action="{!AddAttachment}"/>
         </apex:pageBlockButtons>
         <apex:pageBlockSection columns="1">
            <apex:pageBlockTable value="{!ArticleAttach}" var="attach" id="Article_Attach_table" rendered="{!IF(ISNULL(size) && size == 0, false, true)}">
                
                <apex:column width="20px" >
                     <apex:facet name="header"><strong>Action</strong></apex:facet> 
                    <a href="../{!attach.Id}/e?retURL=/apex/BBW_DetailArticle?Id={!solution.Id}&srPos=0&srKp=0&501&sfdc.override=1">Edit</a>&nbsp;|&nbsp;<a href="../setup/own/deleteredirect.jsp?id={!solution.Id}&sfdc.override=1&delID={!attach.Id}&retURL=/apex/BBW_DetailArticle?id={!solution.Id}&sfdc.override=1">Del</a><!--<apex:commandLink action="{!deleteAttachment}" value="Del" id="deleteAttachLink" reRender="AttchedArticles"/>-->
                </apex:column> 
                <apex:column width="40px" >
                     <apex:facet name="header"><strong>File Name</strong></apex:facet> 
                    <a href="../{!attach.Id}">{!attach.File_Name__c}</a>                     
                </apex:column> 
                <apex:column width="40px" >
                     <apex:facet name="header"><strong>Preview Link</strong></apex:facet> 
                    <a href="{!$Page.AttachmentRedirect}?bname={!attach.Bucket_Name__c}&fname={!attach.File_Name_URL__c}&aws={!as3.key}&sec={!as3.secret}&uval=article" target="_blank">View/Download</a>                     
                </apex:column>                 
            </apex:pageBlockTable>  
            <apex:outputLabel value="No records to display" rendered="{!IF(NOT(ISNULL(size)) && size == 0, true, false)}"/>          
        </apex:pageBlockSection>
    </apex:pageBlock>    
  </apex:form>
  <!-- End Added by Shiirsh on 26 july 11 -->
  <!--<apex:relatedList list="Article_Attachment__r"/>  
  <apex:relatedList list="Attachments"/>-->
  <!--added by mac-->
  <apex:relatedList list="Internal_Article_Links__r"/>
  <!--end of mac's edits-->
  <apex:relatedList list="OpenActivities" rendered="{!IF($Profile.Name == 'Bb - Custom Gold Channel Partner User' || $Profile.Name == 'SRV - Resellers' || $Profile.Name == 'Gold Partner User', false, true)}"/>
  <apex:relatedList list="ActivityHistories" rendered="{!IF($Profile.Name == 'Bb - Custom Gold Channel Partner User' || $Profile.Name == 'SRV - Resellers' || $Profile.Name == 'Gold Partner User', false, true)}"/>
  <apex:relatedList list="CaseSolutions"/>
  <apex:form >
    <apex:pageBlock title="Related Categories" mode="detail">
         <apex:pageBlockButtons location="top" >
            <apex:commandButton value="Select Category" action="{!selectCategory}" rendered="{!IF($Profile.Name != 'System Administrator' && $Profile.Name != 'SRV - System Administrator' && $Profile.Name != 'SRV - KM Administrators' && $Profile.Name != 'SRV - APAC User - KM' && $Profile.Name != 'SRV - KM USR - Publisher' && (solution.isApprovalSent__c == true || solution.Status == 'Published'), false, true)}"/>
         </apex:pageBlockButtons>
         <apex:pageBlockSection columns="1"> 
            <apex:pageBlockTable value="{!ArticleCategories}" var="articleCategory" id="Article_Categories_table">
                
                <apex:column width="30px" rendered="{!IF($Profile.Name != 'System Administrator' && $Profile.Name != 'SRV - System Administrator' && $Profile.Name != 'SRV - KM Administrators' && $Profile.Name != 'SRV - APAC User - KM' && $Profile.Name != 'SRV - KM USR - Publisher' && (solution.isApprovalSent__c == true || solution.Status == 'Published'), false, true)}">
                     <apex:facet name="header"><strong>Action</strong></apex:facet> 
                     <!--<apex:commandLink action="{!deleteCategory}" value="Del" id="delCategory"/>
                     /setup/own/deleteredirect.jsp?delID=02oQ0000000Cpue&retURL=%2F501Q0000000DIoC&_CONFIRMATIONTOKEN=eD9NpjQrgnBTX8Q8Gx_QWhgYpjc_mN9A7sqMwtrBKBsldyF2xJTh8tppXWjoU7wXHhCyaJ_Do6t.YJISxqX_7jIFm4Rg8nhXPu0m9V4ZhKtgqgHE1GiBOV45w30HNSQqtpkN3nDlYXvirVBrc0WOpk_n4gk%3D-->
                    <a id="delCategory" href="/setup/own/deleteredirect.jsp?delID={!LEFT(articleCategory.categoryId, 15)}&retURL=/{!LEFT(solution.Id, 15)}&_CONFIRMATIONTOKEN=eD9NpjQrgnBTX8Q8Gx_QWhgYpjc_mN9A7sqMwtrBKBsldyF2xJTh8tppXWjoU7wXHhCyaJ_Do6t.YJISxqX_7jIFm4Rg8nhXPu0m9V4ZhKtgqgHE1GiBOV45w30HNSQqtpkN3nDlYXvirVBrc0WOpk_n4gk%">del</a>
                     
                </apex:column> 
                
                <apex:column breakBefore="false">   
                    <apex:outputLink value="../ui/solution/SolutionBrowserPage?cid={!LEFT(articleCategory.categoryNodeId,15)}" id="category">
                    {!articleCategory.categoryName}
                    </apex:outputLink>
                    <!--<a id="category" href="/ui/solution/SolutionBrowserPage?cid={!LEFT(articleCategory.categoryNodeId,15)}">{!articleCategory.categoryName}</a>-->
                         
                    <!--<apex:commandLink action="{!save}" value="{!articleCategory.Name}" id="theCommandLink"/>-->
                </apex:column>
            </apex:pageBlockTable>            
        </apex:pageBlockSection>
    </apex:pageBlock>
  </apex:form>
               
</apex:page>