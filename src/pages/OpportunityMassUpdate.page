<apex:page standardController="Opportunity" recordSetVar="opportunities" tabStyle="Opportunity_Console__tab" sidebar="false" extensions="SearchOppExtension">
<style> 
        div.hideCurrDate span.dateInput span.dateFormat{  
            display:none;  

        }  
        .container
        {
           overflow:scroll;  
           height:400px;  
           align:bottom;
        }
</style>

<script  type="text/javascript">
    var lastRow = 1;      
    var newWindowFlag=0;
    var filterFlag = 0;
    var windowRef;
    
    function dosort(sortval){
         sortdata(sortval);        
    }
    /*New Window Code */
    function checkToOpenWindow(opporID)
    {   
        //var windowRef;
        if(newWindowFlag == 0) {
              windowRef = window.open("../apex/OpportunityLineItemMassUpdate?oppVal="+opporID, "_blank","width=1024, height=400,dependent=no,toolbar=no,status=no,directories=no,menubar=no,scrollbars=1,resizable=yes,closed = false", true);
              windowRef.focus();
            newWindowFlag = 1;
        } else if(newWindowFlag == 1) {
            windowRef.close();
            windowRef = window.open("../apex/OpportunityLineItemMassUpdate?oppVal="+opporID, "_blank","width=1024, height=400,dependent=no,toolbar=no,status=no,directories=no,menubar=no,scrollbars=1,resizable=yes,closed = false", true);
            windowRef.focus();
            //alert('Opportunity Line Items window already opened');
        }           
      return false;
     }
  
  //Function is use for update newWindowFlag on close of LineItems window           
    function UpdateOpener() {
      newWindowFlag = 0;
    }  
    function showPageBlock(action) {           
        if(action == 'view') {
            //alert(document.getElementById('FindSave').style.display);
            document.getElementById('Find').style.display="none";
            document.getElementById('view').style.display="block";      
            document.getElementById('FindSave').style.display="none";
            document.getElementById('ViewSave').style.display="block";                   
    
        }else if(action == 'find') { 
            document.getElementById('view').style.display="none";
            document.getElementById('Find').style.display="block";   
            document.getElementById('FindSave').style.display="block";
            document.getElementById('ViewSave').style.display="none";      
        }
    } 
    
    function showErrorBlock(action) {
        var errorDiv = document.getElementById("errorBlock");
        if(action == 'View') {
            errorDiv.style.display   = "none";
        }
    }
    function onLoadBooleanFilter()
    { 
        if (document.getElementById('bool_filter').value &&  document.getElementById('bool_filter_span').style.display == 'none' )
         {  toggleBooleanFilter(); } 
    }
    function greyLink(linkId)
     {     
        if (document.getElementById(linkId)) {          
            document.getElementById(linkId).style.display = 'none';
            document.getElementById(linkId + 'Greyed').style.display = '';
        }
     }
     function unGreyLink(linkId)
      {         
        if (document.getElementById(linkId))
         { document.getElementById(linkId).style.display = '';
           document.getElementById(linkId + 'Greyed').style.display = 'none';
         }
      }
      function addRow()
       {       
         if (lastRow < 9){
              toggleRow(++lastRow, true);
                 }
         document.getElementById('fAddRowLink').blur();
       }
       function removeRow() {           
         if (lastRow > 1){
              toggleRow(lastRow--, false);
          }
          document.getElementById('fRemoveRowLink').blur();
        }
        function toggleRow(row, showing)
         {          
           var displayRow = showing ? '': 'none';
           var x = row + 1;                      
           document.getElementById('frow' + x).style.display = displayRow;
           document.getElementById('f' + x).style.display = displayRow;           
           var op = document.getElementById('fop' + x);
           //'op.style.width = document.getElementById('fop' + 1).style.width;                     
           if (lastRow > 1)
            {            
                unGreyLink('fRemoveRowLink');             
            }
           else 
           {
                greyLink('fRemoveRowLink');
            }
           if (lastRow < 9)
           {            
                unGreyLink('fAddRowLink');
           }
           else 
           {            
            greyLink('fAddRowLink');
           }
         }
         function toggleBooleanFilter()
          {
           if (document.getElementById('fcol1').disabled)
            return;
              var bool_filter = document.getElementById('bool_filter_span');  
              var showing = (bool_filter.style.display == 'none');  
              var display = showing ? '' : 'none';  
              var displayRow = showing ? (isIE ? 'block' : 'table-row') : 'none';  
              if (document.getElementById('frowButtons'))
              {
                document.getElementById('frowButtons').style.display = displayRow;
              }  
              bool_filter.style.display = display;  
              document.getElementById('bool_filter_toggle').innerHTML = showing ? 'Clear Advanced Options' : 'Advanced Options...';  
              if (!showing) 
              {    
                document.getElementById('bool_filter').value = '';    
                lastRow = 4;  
              } 
              else if (!document.getElementById('bool_filter').value || (document.getElementById('bool_filter').value == ''))
              {
                  var initialBoolFilter = '';
                  for(var i = 0; i < 10; i++) 
                    {
                        var x = i + 1; 
                        var colEle = document.getElementById('fcol' + x);        
                        if (typeof colEle.selectedIndex == 'number' ? colEle.selectedIndex != 0 : colEle.value.length > 0) 
                        {
                                if (initialBoolFilter.length > 0) 
                                    initialBoolFilter += ' AND ';        
                                initialBoolFilter += (i + 1);      
                        }    
                    }    
                    document.getElementById('bool_filter').value = initialBoolFilter;  
                }  
                var andVisibility = showing ? 'hidden' : 'visible';  
                for(var i = 0; i < 10; i++)
                 {
                     if (i >= 5 && !showing) 
                        toggleRow(i, showing);var x = i + 1;    
                     document.getElementById('f' + x).style.display = display;    
                      if (i < 4) document.getElementById('and' + x).style.visibility = andVisibility; 
                  }
              }
              
              //Method is use for hide filter block in page
              function collapseFilter() {
                var filterDiv = document.getElementById("filterDiv");
                var downArrow = document.getElementById("downArrow");
                var rightArrow = document.getElementById("rightArrow");
                if(filterFlag == 0)
                {
                    filterDiv.style.display   = "block";
                    downArrow.style.display   = "block";
                    rightArrow.style.display   = "none";
                    filterFlag =1;
                } else {
                    filterDiv.style.display   = "none";
                    downArrow.style.display   = "none";
                    rightArrow.style.display   = "block";
                    filterFlag = 0;
                }
              
              }
               function funCancel(){
                    //window.location = "../Apex/OpportunityMassUpdate";
                    setTimeout("location.reload(true);",1500);
               }
                function setFocusOnLoad() {}
              </script>
    <apex:form >
        <apex:pageBlock id="Entirepage" >

             <apex:outputPanel id="sectionheader">    
                <apex:sectionHeader id="sectionview" title="Opportunity" subtitle="Bb OMC - Total Amount : ${!totalcom}" rendered="{!NOT(TotalDisplay)}"/>
                <apex:sectionHeader id="sectionfind" title="Opportunity" subtitle="Bb OMC - Total Amount : ${!totalcomfind}" rendered="{!TotalDisplay}"/>
            </apex:outputPanel>
            
            <div id="FindSave" style="display:none" align="middle">   
                <apex:commandButton value="Save All" action="{!doSave}" reRender="opp_table,errorPanel" status="processingStatus"/>                
                <apex:commandButton value="Cancel" immediate="true" action="{!refreshPageFind}" reRender="opp_table,errorPanel"/>                
            </div>
            <div id="ViewSave" align="middle">
                <apex:commandButton value="Save All"  action="{!doViewSave}" reRender="opp_table1,errorPanel" status="processingStatus"/>                
                <apex:commandButton value="Cancel" action="{!refreshPageView}" reRender="opp_table1,errorPanel"/>                
            </div>
            <apex:pageMessages />
            <div id="errorBlock">
                <apex:outputPanel id="errorPanel">
                    <apex:pageMessage strength="2" title="{!errorTitle}" summary="{!errorMessage}" severity="{!errorSeverity}" rendered="{!errorShow}" />
                </apex:outputPanel>
            </div>
            <br/>
                <apex:panelGrid columns="2">
                    <apex:outputLabel value="View:"/>
                    <apex:selectList value="{!con.filterId}" size="1"    ><!--  onchange="showPageBlock('view');" -->
                        <apex:actionSupport event="onchange" action="{!updatelist}" oncomplete="showPageBlock('view');showErrorBlock('View');"  status="processingStatus" reRender="PagingView,orgtable,sectionheader,orgtable1"/>
                        <apex:selectOptions value="{!con.listviewoptions}" />
                    </apex:selectList>
                </apex:panelGrid>
            <br/>
            <div Id="rightArrow" style="display:block"> <a href="" onclick="collapseFilter();"><h2>Opportunity Filter </h2> </a><a href="javascript:collapseFilter();"> <img src="/img/alohaSkin/setup/setup_plus_lev1.gif"/> </a>   </div>
            <div Id="downArrow" style="display:none" > <a href="" onclick="collapseFilter();"><h2>Opportunity Filter </h2> </a><a href="javascript:collapseFilter();">  <img src="{!$Resource.Down_Arrow}"/> </a>   </div>
            
            <apex:pageBlock >
                 <apex:actionFunction action="{!updatelist}" name="sortdata" reRender="orgtable,alttable,Paging,PagingView,sectionheader,sectionfind" status="processingStatus">
                        <apex:param name="firstParam" value="" />
                 </apex:actionFunction>
                
                <div id="filterDiv" style="display:none">
                    <table class="declarativeFilterTable">
                        <tr>
                            <TH scope="col">&nbsp;</TH>
                            <TH scope="col">Field</TH>
                            <TH scope="col">Operator</TH>
                            <TH scope="col">Value</TH>
                        </tr>
                        <tr id="frow1" style="">
                            <td><span class="textBox" id="f1">1.</span></td>
                            <td><apex:outputPanel id="fcol1">    
                                    <apex:selectList id="fcol11" size="1" value="{!FieldName1}">                            
                                        <apex:selectOptions value="{!columnNamesNew}"/>                                         
                                    </apex:selectList>
                                </apex:outputPanel>
                            </td>
                            
                            <td>
                                <apex:outputPanel id="fop1">    
                                    <apex:selectList id="fop11" size="1" value="{!OutName1}">                        
                                        <apex:selectOptions value="{!OperatorNames}"/>
                                    </apex:selectList>
                                </apex:outputPanel>
                            </td>
                            <td><apex:outputPanel id="fval1" dir="TProbabilityPanel" layout="none">
                                    <apex:inputText id="fval11"  value="{!Value1}"/>                   
                                </apex:outputPanel>                    
                            </td>
                        </tr>
                        <tr id="frow2" style="">
                        <td><span class="textBox" id="f2">2.</span></td>
                            <td><apex:outputPanel id="fcol2">    
                                    <apex:selectList id="fcol12" size="1" value="{!FieldName2}">                            
                                        <apex:selectOptions value="{!columnNamesNew}"/>                                         
                                    </apex:selectList>
                                </apex:outputPanel>
                            </td>
                            
                            <td>
                                <apex:outputPanel id="fop2">    
                                    <apex:selectList id="fop12" size="1" value="{!OutName2}">                        
                                        <apex:selectOptions value="{!OperatorNames}"/>
                                    </apex:selectList>
                                </apex:outputPanel>
                            </td>
                            <td><apex:outputPanel id="fval2" dir="TProbabilityPanel" layout="none">
                                    <apex:inputText id="fval12"  value="{!Value2}"/>                   
                                </apex:outputPanel>                    
                            </td>
                        </tr>
                        <tr id="frow3" style="display:none">
                        <td><span class="textBox" id="f3" style="display:none">3.</span></td>
                            <td><apex:outputPanel id="fcol3">    
                                    <apex:selectList id="fcol13" size="1" value="{!FieldName3}">                            
                                        <apex:selectOptions value="{!columnNamesNew}"/>                                         
                                    </apex:selectList>
                                </apex:outputPanel>
                            </td>
                            
                            <td>
                                <apex:outputPanel id="fop3">    
                                    <apex:selectList id="fop13" size="1" value="{!OutName3}">                        
                                        <apex:selectOptions value="{!OperatorNames}"/>
                                    </apex:selectList>
                                </apex:outputPanel>
                            </td>
                            <td><apex:outputPanel id="fval3" dir="TProbabilityPanel" layout="none">
                                    <apex:inputText id="fval13"  value="{!Value3}"/>                   
                                </apex:outputPanel>                    
                            </td>
                        </tr>
                        <tr id="frow4" style="display:none">
                        <td><span class="textBox" id="f4" style="display:none">4.</span></td>
                            <td><apex:outputPanel id="fcol4">    
                                    <apex:selectList id="fcol14" size="1" value="{!FieldName4}">                            
                                        <apex:selectOptions value="{!columnNamesNew}"/>                                         
                                    </apex:selectList>
                                </apex:outputPanel>
                            </td>
                            
                            <td>
                                <apex:outputPanel id="fop4">    
                                    <apex:selectList id="fop14" size="1" value="{!OutName4}">                        
                                        <apex:selectOptions value="{!OperatorNames}"/>
                                    </apex:selectList>
                                </apex:outputPanel>
                            </td>
                            <td><apex:outputPanel id="fval4" dir="TProbabilityPanel" layout="none">
                                    <apex:inputText id="fval14"  value="{!Value4}"/>                   
                                </apex:outputPanel>                    
                            </td>
                        </tr>
                        <tr id="frow5" style="display:none">
                        <td><span class="textBox" id="f5" style="display:none">5.</span></td>
                            <td><apex:outputPanel id="fcol5">    
                                    <apex:selectList id="fcol15" size="1" value="{!FieldName5}">                            
                                        <apex:selectOptions value="{!columnNamesNew}"/>                                         
                                    </apex:selectList>
                                </apex:outputPanel>
                            </td>
                            
                            <td>
                                <apex:outputPanel id="fop5" >    
                                    <apex:selectList id="fop15" size="1" value="{!OutName5}">                        
                                        <apex:selectOptions value="{!OperatorNames}"/>
                                    </apex:selectList>
                                </apex:outputPanel>
                            </td>
                            <td><apex:outputPanel id="fval5" dir="TProbabilityPanel" layout="none">
                                    <apex:inputText id="fval15"  value="{!Value5}"/>                   
                                </apex:outputPanel>                    
                            </td>
                        </tr>
                        <tr id="frow6" style="display:none">
                        <td><span class="textBox" id="f6" style="display:none">6.</span></td>
                            <td><apex:outputPanel id="fcol6">    
                                    <apex:selectList id="fcol16" size="1" value="{!FieldName6}">                            
                                        <apex:selectOptions value="{!columnNamesNew}"/>                                         
                                    </apex:selectList>
                                </apex:outputPanel>
                            </td>
                            
                            <td>
                                <apex:outputPanel id="fop6">    
                                    <apex:selectList id="fop16" size="1" value="{!OutName6}">                        
                                        <apex:selectOptions value="{!OperatorNames}"/>
                                    </apex:selectList>
                                </apex:outputPanel>
                            </td>
                            <td><apex:outputPanel id="fval6" dir="TProbabilityPanel" layout="none">
                                    <apex:inputText id="fval16"  value="{!Value6}"/>                   
                                </apex:outputPanel>                    
                            </td>
                        </tr>
                        <tr id="frow7" style="display:none">
                        <td><span class="textBox" id="f7" style="display:none">7.</span></td>
                            <td><apex:outputPanel id="fcol7">    
                                    <apex:selectList id="fcol17" size="1" value="{!FieldName7}">                            
                                        <apex:selectOptions value="{!columnNamesNew}"/>                                         
                                    </apex:selectList>
                                </apex:outputPanel>
                            </td>
                            
                            <td>
                                <apex:outputPanel id="fop7">    
                                    <apex:selectList id="fop17" size="1" value="{!OutName7}">                        
                                        <apex:selectOptions value="{!OperatorNames}"/>
                                    </apex:selectList>
                                </apex:outputPanel>
                            </td>
                            <td><apex:outputPanel id="fval7" dir="TProbabilityPanel" layout="none">
                                    <apex:inputText id="fval17"  value="{!Value7}"/>                   
                                </apex:outputPanel>                    
                            </td>
                        </tr>
                        <tr id="frow8" style="display:none">
                        <td><span class="textBox" id="f8" style="display:none">8.</span></td>
                            <td><apex:outputPanel id="fcol8">    
                                    <apex:selectList id="fcol18" size="1" value="{!FieldName8}">                            
                                        <apex:selectOptions value="{!columnNamesNew}"/>                                         
                                    </apex:selectList>
                                </apex:outputPanel>
                            </td>
                            
                            <td>
                                <apex:outputPanel id="fop8">    
                                    <apex:selectList id="fop18" size="1" value="{!OutName8}">                        
                                        <apex:selectOptions value="{!OperatorNames}"/>
                                    </apex:selectList>
                                </apex:outputPanel>
                            </td>
                            <td><apex:outputPanel id="fval8" dir="TProbabilityPanel" layout="none">
                                    <apex:inputText id="fval18"  value="{!Value8}"/>                   
                                </apex:outputPanel>                    
                            </td>
                        </tr>
                        <tr id="frow9" style="display:none">
                        <td><span class="textBox" id="f9" style="display:none">9.</span></td>
                            <td><apex:outputPanel id="fcol9">    
                                    <apex:selectList id="fcol19" size="1" value="{!FieldName9}">                            
                                        <apex:selectOptions value="{!columnNamesNew}"/>                                         
                                    </apex:selectList>
                                </apex:outputPanel>
                            </td>
                            
                            <td>
                                <apex:outputPanel id="fop9">    
                                    <apex:selectList id="fop19" size="1" value="{!OutName9}">                        
                                        <apex:selectOptions value="{!OperatorNames}"/>
                                    </apex:selectList>
                                </apex:outputPanel>
                            </td>
                            <td><apex:outputPanel id="fval9" dir="TProbabilityPanel" layout="none">
                                    <apex:inputText id="fval19"  value="{!Value9}"/>                   
                                </apex:outputPanel>                    
                            </td>
                        </tr>
                        <tr id="frow10" style="display:none">
                        <td><span class="textBox" id="f10" style="display:none">10.</span></td>
                            <td><apex:outputPanel id="fcol10">    
                                    <apex:selectList id="fcol110" size="1" value="{!FieldName10}">                          
                                        <apex:selectOptions value="{!columnNamesNew}"/>                                         
                                    </apex:selectList>
                                </apex:outputPanel>
                            </td>
                            
                            <td>
                                <apex:outputPanel id="fop10">    
                                    <apex:selectList id="fop110" size="1" value="{!OutName10}">                        
                                        <apex:selectOptions value="{!OperatorNames}"/>
                                    </apex:selectList>
                                </apex:outputPanel>
                            </td>
                            <td><apex:outputPanel id="fval10" dir="TProbabilityPanel" layout="none">
                                    <apex:inputText id="fval110"  value="{!Value10}"/>                   
                                </apex:outputPanel>                    
                            </td>
                        </tr>
                        
                     </table>
                     &nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:addRow();" id="fAddRowLink">Add Row</a><span  class="greyedLink" id="fAddRowLinkGreyed" style="display:none">Add Row</span> 
                     &nbsp;
                     <a href="javascript:removeRow();" id="fRemoveRowLink" style="display:none">Remove Row</a><span  class="greyedLink" id="fRemoveRowLinkGreyed" >Remove Row</span>
                     <br/><br/>&nbsp;&nbsp;<apex:commandButton id="SearchOpp" value="Find" action="{!SearchOppByFilter}" status="processingStatus"  reRender="opp_table,errorPanel,Paging,sectionheader,sectionfind" onclick="showPageBlock('find');">
                            <!--<apex:actionSupport event="onclick" rerender="opp_table,errorPanel,TotalAmtFind" status="processingStatus"/>-->
                     </apex:commandButton>
                </div>
            </apex:pageBlock>  
            <apex:actionStatus id="processingStatus" startText="(In Process...)"  />  
            <div id="Find"  style="display:none">

            <apex:outputPanel id="Paging">
                    <div align="right" style="display:{!IF(NOT(ISNULL(opportunities2)),'block','none')}">
                        
                        <font size="1pt">Page :&nbsp;<apex:outputLabel value="{!PageNumber1}"/>&nbsp;out of&nbsp;<apex:outputLabel value="{!totalPageNumber}"/>&nbsp;&nbsp;&nbsp;&nbsp;</font>           
                        <apex:commandButton value="First" action="{!FirstBtnClick}" disabled="{!previousButtonEnabled}" reRender="opp_table,Paging,errorPanel,sectionheader" status="processingStatus" ></apex:commandButton>
                        <apex:commandButton value="Previous" action="{!previousBtnClick}" disabled="{!previousButtonEnabled}" reRender="opp_table,Paging,errorPanel,sectionheader" status="processingStatus" ></apex:commandButton>
                        <apex:commandButton value="Next" action="{!nextBtnClick}" disabled="{!nextButtonDisabled}" reRender="opp_table,Paging,errorPanel,sectionheader" status="processingStatus" ></apex:commandButton>
                        <apex:commandButton value="Last" action="{!lastBtnClick}" disabled="{!nextButtonDisabled}" reRender="opp_table,Paging,errorPanel,sectionheader" status="processingStatus" ></apex:commandButton>
                        <apex:commandButton value="Save All"  action="{!doSave}" reRender="opp_table,errorPanel" status="processingStatus" onclick="showErrorBlock('Save');"/>                
                        <apex:commandButton value="Cancel" action="{!refreshPageFind}" reRender="opp_table,errorPanel,sectionheader,sectionview"/>
                              
                    </div> 
            </apex:outputPanel>

                <apex:outputPanel id="alttable" layout="block" styleClass="container"> 
                   
                
                    <apex:pageBlockTable value="{!opportunities2}" var="opp" id="opp_table" rows="100">                
                        <apex:column width="30px">                     
                          <apex:facet name="header"><strong>Products</strong></apex:facet> 
                            <div> <a onclick=" return checkToOpenWindow('{!opp.Id}');" target="new" style="text-decoration: none;"><img src="/img/alohaSkin/setup/setup_plus_lev1.gif"/></a>   </div>  
                        </apex:column>  
                        <apex:column >
                            <apex:facet name="header"><apex:outputLabel value="{!AccName1}" onclick="dosort('acc1');" escape="false"/></apex:facet>
                            <apeX:outputText value="{!opp.Account.Name}"></apeX:outputText>
                        </apex:column>     
                        <apex:column >
                            <apex:facet name="header"><apex:outputLabel value="{!PSC1}" onclick="dosort('psc1');" escape="false"/></apex:facet>
                            <apeX:outputText value="{!opp.Account.PS_Company_Id__c}"></apeX:outputText>
                        </apex:column>                  
                        <apex:column >   
                            <apex:facet name="header"><apex:outputLabel value="{!Amt1}" onclick="dosort('amt1');" escape="false"/></apex:facet>
                            <apeX:outputText value="{!opp.Amount}"></apex:outputText>
                        </apex:column>                
                        <apex:column >
                            <apex:facet name="header"><apex:outputLabel value="{!OppName1}" onclick="dosort('on1');" escape="false"/></apex:facet>
                            <div> <a href="/{!opp.Id}" target="{!opp.Id}" >{!opp.Name}</a> </div>
                        </apex:column>                    
                        <apex:column >     
                            <apex:facet name="header"><apex:outputLabel value="{!OppOwn1}" onclick="dosort('oo1');" escape="false"/></apex:facet>
                            <apeX:outputText value="{!opp.Owner__r.Name}"></apeX:outputText>
                        </apex:column>   
                        <apex:column > 
                            <apex:facet name="header"><apex:outputLabel value="{!ClsDat1}" onclick="dosort('cd1');" escape="false"/></apex:facet>
                                <div class="hideCurrDate">   
                                  <apex:inputField value="{!opp.closeDate}"/>
                                </div>  
                        </apex:column>
                        <apex:column >
                            <apex:facet name="header"><apex:outputLabel value="{!Stg1}" onclick="dosort('stg1');" escape="false"/></apex:facet>
                                 <apex:inputField value="{!opp.stageName}"/>
                        </apex:column>
                  <!-- commented by Nikhil. since no required -->
                  <!--  
                        <apex:column width="80px"> 
                            <apex:facet name="header"><apex:outputLabel value="{!Prob1}" onclick="dosort('prob1');" escape="false"/></apex:facet>
                                  <apex:inputField value="{!opp.Probability}" style="width: 80px;"/>   
                        </apex:column>
                   -->     
               // added by nikhil add a cloumn for forcast comments start     
                         <apex:column width="80px"> 
                            <apex:facet name="header"><apex:outputLabel value="{!FC1}" onclick="dosort('FC1');" escape="false"/></apex:facet>
                                  <apex:inputField value="{!opp.Forecast_Comments__c}" style="width: 80px;"/>   
                        </apex:column> 
               //end    
               <!-- Commented by nikhil.since no need -->
               <!-- 
                        <apex:column >
                            <apex:facet name="header"><apex:outputLabel value="{!ER1}" onclick="dosort('er1');" escape="false"/></apex:facet>
                            <apeX:outputText value="{!opp.ExpectedRevenue}"></apeX:outputText>
                        </apex:column> 
               -->            
                        <apex:column > 
                            <apex:facet name="header"><apex:outputLabel value="{!PDD1}" onclick="dosort('pdd1');" escape="false"/></apex:facet>
                                <div class="hideCurrDate">
                                  <apex:inputField value="{!opp.Customer_Requested_Prod_Delivery_Date__c}"/>
                                </div>       
                        </apex:column>
               <!-- Commented by Nikhil. since no need-->
               <!--
                        <apex:column > 
                            <apex:facet name="header"><apex:outputLabel value="{!PSD1}" onclick="dosort('psd1');" escape="false"/></apex:facet>
                                <div class="hideCurrDate">
                                  <apex:inputField value="{!opp.PKO_Scheduled_Date__c}"/>
                                </div>  
                        </apex:column>
                -->        
                        <apex:column > 
                            <apex:facet name="header"><apex:outputLabel value="{!DLD1}" onclick="dosort('dld1');" escape="false"/></apex:facet>
                                <div class="hideCurrDate">
                                  <apex:inputField value="{!opp.Customer_Desired_Live_Date__c}"/>
                                </div>
                        </apex:column>      
                        
                        <apex:column >
                            <apex:facet name="header"><apex:outputLabel value="{!CQN1}" onclick="dosort('cqn1');" escape="false"/></apex:facet>
                            <apeX:outputText value="{!opp.Current_Quote_Number__c}"></apeX:outputText>
                        </apex:column>  
                        <apex:column >                       
                            <apex:facet name="header"><apex:outputLabel value="{!RN1}" onclick="dosort('rn1');" escape="false"/></apex:facet>
                            <apeX:outputText value="{!opp.Revision_Number__c}"></apeX:outputText>
                        </apex:column>  
                        <apex:column > 
                            <apex:facet name="header"><apex:outputLabel value="{!OppType1}" onclick="dosort('ot1');" escape="false"/></apex:facet>
                            <apeX:outputText value="{!opp.Type}"></apeX:outputText>
                        </apex:column> 
                      <!-- Added by Nikhil -->
                        <apex:column > 
                            <apex:facet name="header"><apex:outputLabel value="{!TFC1}"  escape="false"/></apex:facet>
                            <apeX:Inputfield value="{!opp.TransactForecastCategory__c}"></apeX:Inputfield>
                        </apex:column> 
                        
                        <apex:column > 
                            <apex:facet name="header"><apex:outputLabel value="{!SC1}"  escape="false"/></apex:facet>
                            <apeX:Inputfield value="{!opp.Ship_On_Close__c}"></apeX:Inputfield>
                        </apex:column> 
                      <!-- Commented-->
                      <!--  
                        <apex:column > 
                            <apex:facet name="header"><apex:outputLabel value="{!CDPD1}" onclick="dosort('CDPD1');" escape="false"/></apex:facet>
                            <apeX:Inputfield value="{!opp.Customer_Requested_Prod_Delivery_Date__c}"></apeX:Inputfield>
                        </apex:column> 
                        -->
                        
                        <apex:column > 
                            <apex:facet name="header"><apex:outputLabel value="{!COF1}"  escape="false"/></apex:facet>
                            <apeX:Inputfield value="{!opp.Comments_for_Fulfillment__c}"></apeX:Inputfield>
                        </apex:column> 
                      <!-- END -->   
                   </apex:pageBlockTable>   
                 </apex:outputPanel>
                 <!-- <apex:outputPanel id="TotalAmtFind">
                      <apex:outputText value="Total Amount : ${!totalamtfind}"></apex:outputText>
                </apex:outputPanel> -->
            </div>
             <div id="view">
                <apex:outputPanel id="PagingView">
                   <div align="right">
                        
                        <font size="1pt">Page :&nbsp;<apex:outputLabel value="{!PageNumber1org}"/>&nbsp;out of&nbsp;<apex:outputLabel value="{!totalPageNumberOrg}"/>&nbsp;&nbsp;&nbsp;&nbsp;</font>           
                        <apex:commandButton value="First" action="{!FirstBtnClickOrg}" disabled="{!previousButtonEnabledorg}" reRender="opp_table1,PagingView,errorPanel,sectionview" status="processingStatus" ></apex:commandButton>
                        <apex:commandButton value="Previous" action="{!previousBtnClickOrg}" disabled="{!previousButtonEnabledorg}" reRender="opp_table1,PagingView,errorPanel,sectionview" status="processingStatus" ></apex:commandButton>
                        <apex:commandButton value="Next" action="{!nextBtnClickorg}" disabled="{!nextButtonDisabledorg}" reRender="opp_table1,PagingView,errorPanel,sectionview" status="processingStatus" ></apex:commandButton>
                        <apex:commandButton value="Last" action="{!lastBtnClickorg}" disabled="{!nextButtonDisabledorg}" reRender="opp_table1,PagingView,errorPanel,sectionview" status="processingStatus" ></apex:commandButton>
                        <apex:commandButton value="Save All"  action="{!doViewSave}" reRender="opp_table1,errorPanel" status="processingStatus" onclick="showErrorBlock('Save');"/>                
                        <apex:commandButton value="Cancel" action="{!refreshPageView}" reRender="opp_table1,errorPanel,sectionheader,sectionview"/>
                              
                    </div> 
                </apex:outputPanel>
            
                
                
            <apex:outputPanel id="orgtable" layout="block" styleclass="container">
                   <apex:pageBlockTable value="{!OrgOpp}" var="opp1" id="opp_table1" rows="100">                
                     <apex:column width="30px">                     
                      <apex:facet name="header"><strong>Products</strong></apex:facet> 
                        <div> <a onclick=" return checkToOpenWindow('{!opp1.Id}');" target="new" style="text-decoration: none;"><img src="/img/alohaSkin/setup/setup_plus_lev1.gif"/></a>   </div>  
                    </apex:column>  
                    
                    <!--  Nishith Sahu 2011-01-21 change for Sales
                    <apex:column headerValue="Forecast Category" value="{!opp1.ForecastCategoryName}"/>
                    -->
           
                    <apex:column >
                        <apex:facet name="header"><apex:outputLabel value="{!AccName}" onclick="dosort('acc');" escape="false"/></apex:facet>
                        <apeX:outputText value="{!opp1.Account.Name}"></apeX:outputText>
                    </apex:column>                  
                    <apex:column >
                            <apex:facet name="header"><apex:outputLabel value="{!PSC}" onclick="dosort('psc');" escape="false"/></apex:facet>
                            <apeX:outputText value="{!opp1.Account.PS_Company_Id__c}"></apeX:outputText>
                    </apex:column>                  
                    <apex:column >   
                            <apex:facet name="header"><apex:outputLabel value="{!Amt}" onclick="dosort('amt');" escape="false"/></apex:facet>
                            <apeX:outputText value="{!opp1.Amount}"></apeX:outputText>
                    </apex:column>                
                    <apex:column >
                        <apex:facet name="header"><apex:outputLabel value="{!OppName}" onclick="dosort('on');" escape="false"/></apex:facet>
                        <div> <a href="/{!opp1.Id}" target="{!opp1.Id}" >{!opp1.Name}</a> </div>
                    </apex:column>                    
                    <apex:column >     
                            <apex:facet name="header"><apex:outputLabel value="{!OppOwn}" onclick="dosort('oo');" escape="false"/></apex:facet>
                            <apeX:outputText value="{!opp1.Owner__r.Name}"></apeX:outputText>
                    </apex:column>  
                    <apex:column > 
                        <apex:facet name="header"><apex:outputLabel value="{!ClsDat}" onclick="dosort('cd');" escape="false"/></apex:facet>
                           <div class="hideCurrDate">  
                            <apex:inputField value="{!opp1.closeDate}"/>
                           </div> 
                    </apex:column>
                    <apex:column >
                        <apex:facet name="header"><apex:outputLabel value="{!Stg}" onclick="dosort('stg');" escape="false"/></apex:facet>
                        <apex:inputField value="{!opp1.stageName}"/>
                    </apex:column>
                    
                    <!--  Nishith Sahu 2011-01-21 added the below lines -->
                  <!-- Commented by Nikhil. since no need for forcast comment->
                  <!--  
                     <apex:column width="80px"> 
                           <apex:facet name="header"><apex:outputLabel value="{!Prob}" onclick="dosort('prob');" escape="false"/></apex:facet>
                           <div class="hideCurrDate"> 
                                <apex:inputField value="{!opp1.Probability}" style="width: 80px;"/>
                           </div>      
                     </apex:column>
                     -->  
              // added by nikhil add a cloumn for forcast comments start     
                         <apex:column width="80px"> 
                            <apex:facet name="header"><apex:outputLabel value="{!FC}" onclick="dosort('FC');" escape="false"/></apex:facet>
                                  <apex:inputField value="{!opp1.Forecast_Comments__c}" style="width: 80px;"/>   
                        </apex:column> 
               //end   
               <!-- Commented by Nikhil. since no need -->
               <!--  
                     <apex:column >
                            <apex:facet name="header"><apex:outputLabel value="{!ER}" onclick="dosort('er');" escape="false"/></apex:facet>
                            <apeX:outputText value="{!opp1.ExpectedRevenue}"></apeX:outputText>
                    </apex:column> 
                 -->   
                     <apex:column > 
                            <apex:facet name="header"><apex:outputLabel value="{!PDD}" onclick="dosort('pdd');" escape="false"/></apex:facet>
                                <div class="hideCurrDate">  
                                  <apex:inputField value="{!opp1.Customer_Requested_Prod_Delivery_Date__c}"/>
                                </div>  
                        </apex:column>
                   <!-- commented by Nikhil . since no need --> 
                   <!--    
                        <apex:column > 
                            <apex:facet name="header"><apex:outputLabel value="{!PSD}" onclick="dosort('psd');" escape="false"/></apex:facet>
                                <div class="hideCurrDate">  
                                  <apex:inputField value="{!opp1.PKO_Scheduled_Date__c}"/>
                                </div>  
                        </apex:column>
                    -->    
                        <apex:column > 
                            <apex:facet name="header"><apex:outputLabel value="{!DLD}" onclick="dosort('dld');" escape="false"/></apex:facet>
                                <div class="hideCurrDate">   
                                  <apex:inputField value="{!opp1.Customer_Desired_Live_Date__c}"/>
                                </div>  
                        </apex:column>               
                    <!--  Nishith Sahu 2011-01-21 end changes -->                    
                    <apex:column >
                            <apex:facet name="header"><apex:outputLabel value="{!CQN}" onclick="dosort('cqn');" escape="false"/></apex:facet>
                            <apeX:outputText value="{!opp1.Current_Quote_Number__c}"></apeX:outputText>
                    </apex:column>  
                    <apex:column >                       
                            <apex:facet name="header"><apex:outputLabel value="{!RN}" onclick="dosort('rn');" escape="false"/></apex:facet>
                            <apeX:outputText value="{!opp1.Revision_Number__c}"></apeX:outputText>
                    </apex:column>  
                    <apex:column > 
                            <apex:facet name="header"><apex:outputLabel value="{!OppType}" onclick="dosort('ot');" escape="false"/></apex:facet>
                            <apeX:outputText value="{!opp1.Type}"></apeX:outputText>
                    </apex:column>
                    <!-- Added By Nikhil -->
                    <apex:column > 
                            <apex:facet name="header"><apex:outputLabel value="{!TFC}"  escape="false"/></apex:facet>
                            <apeX:Inputfield value="{!opp1.TransactForecastCategory__c}"></apeX:inputfield>
                        </apex:column> 
                        
                        <apex:column > 
                            <apex:facet name="header"><apex:outputLabel value="{!SC}"  escape="false"/></apex:facet>
                            <apeX:Inputfield value="{!opp1.Ship_On_Close__c}"></apeX:Inputfield>
                        </apex:column> 
                      <!-- Commented -->  
                       <!--
                        <apex:column > 
                            <apex:facet name="header"><apex:outputLabel value="{!CDPD}"  escape="false"/></apex:facet>
                            <apeX:Inputfield value="{!opp1.Customer_Requested_Prod_Delivery_Date__c}"></apeX:Inputfield>
                        </apex:column> 
                        -->
                        <apex:column > 
                            <apex:facet name="header"><apex:outputLabel value="{!COF}"  escape="false"/></apex:facet>
                            <apeX:Inputfield value="{!opp1.Comments_for_Fulfillment__c}"></apeX:Inputfield>
                        </apex:column> 
                        <!-- END -->  
                  </apex:pageBlockTable>   

               </apex:outputPanel> 
              <!--  <apex:outputPanel id="TotalAmt">
                      <apex:outputText value="Total Amount : ${!totalamt}"></apex:outputText>
                </apex:outputPanel>  -->
            </div>   
            
            
        
         </apex:pageBlock>
     </apex:form>
</apex:page>